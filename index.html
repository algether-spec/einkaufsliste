<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">

    <title>Einkaufsliste</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2563eb">

    <!-- PWA (klassisch, bewÃ¤hrt) -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <!-- Styles -->
    <link rel="stylesheet" href="style.css">

    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-cart-192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon-180.png">

    <!-- Service Worker -->
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("service-worker.js");
        }
    </script>
</head>

<body>

<!-- SPLASH SCREEN -->
<div id="splash">
    <div class="splash-cart" aria-label="Einkaufswagen">ðŸ›’</div>
    <div class="splash-title">Einkaufsliste</div>
    <div class="splash-sub">powered by Al.Gether</div>
</div>

<div class="app">

    <header>
        Einkaufsliste
        <span class="badge-free" id="mode-badge">Erfassen</span>
    </header>

    <div class="auth-bar" id="auth-bar">
        <input
            type="text"
            id="sync-code"
            class="auth-email"
            placeholder="GerÃ¤te-Code (z. B. 1234)">
        <button type="button" id="btn-sync-apply" class="auth-button">Verbinden</button>
        <button type="button" id="btn-sync-new" class="auth-button auth-logout">Neu</button>
        <div id="auth-status" class="auth-status"></div>
    </div>

    <main>

        <!-- MEHRZEILEN-EINGABE -->
        <div class="input-section">
            <textarea
                id="multi-line-input"
                placeholder="Jede Zeile = ein Artikel"
                rows="1"></textarea>

            <div class="input-actions">
                <button type="button"
                        id="newline-button"
                        class="action-button">â†µ</button>

                <button type="button"
                        id="mic-button"
                        class="mic-button"
                        aria-pressed="false">ðŸŽ¤</button>

                <button type="button"
                        id="add-all-button"
                        class="add-button">Ãœbernehmen</button>

                <button type="button"
                        id="btnExport"
                        class="export-button">Export</button>
            </div>

            <div id="mic-status" class="mic-status" aria-live="polite"></div>
        </div>

        <ul id="liste"></ul>

    </main>

    <div class="version-row">
        <div class="version-badge" id="version-badge">v1.0.16</div>
        <button type="button" id="btn-force-update" class="update-button">Update</button>
    </div>
    <div class="sync-status" id="sync-status">Sync: Lokal</div>
    <div class="sync-debug" id="sync-debug" hidden></div>

    <nav>
        <button type="button" id="btnErfassen" class="active">
            Erfassen
        </button>

        <button type="button" id="btnEinkaufen">
            Einkaufen
        </button>
    </nav>

</div>

<script src="config.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="app.js"></script>

</body>
</html>
