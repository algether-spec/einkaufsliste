<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">

    <title>Erinnerungen</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2563eb">

    <!-- PWA (klassisch, bewÃ¤hrt) -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <!-- Styles -->
    <link rel="stylesheet" href="style.css?v=1.0.0">

    <!-- Manifest -->
    <link rel="manifest" href="manifest.json?v=1.0.0">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-cart-192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon-180.png">

    <!-- Service Worker -->
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("service-worker.js?v=1.0.0", { updateViaCache: "none" });
        }
    </script>
</head>

<body>

<!-- SPLASH SCREEN -->
<div id="splash">
    <div class="splash-cart" aria-label="Erinnerungen">ðŸ›’</div>
    <div class="splash-title">Erinnerungen</div>
    <div class="splash-sub">powered by Al.Gether</div>
</div>

<div class="app">

    <header>Erinnerungen</header>

    <div class="sync-code-compact" id="sync-code-compact">
        Code:
        <button type="button" id="btn-sync-code-display" class="sync-code-display">0000</button>
        <button type="button" id="btn-sync-code-edit" class="sync-code-edit">Code aendern</button>
        <button type="button" id="btn-force-update" class="update-button">Update</button>
        <div class="sync-code-hint">Hinweis: Code 0000 oeffnet nur die Kurzanleitung.</div>
    </div>

    <div class="auth-bar is-hidden" id="auth-bar" hidden>
        <input
            type="text"
            id="sync-code"
            class="auth-email"
            placeholder="GerÃ¤te-Code (z. B. 1234)">
        <button type="button" id="btn-sync-apply" class="auth-button">Verbinden</button>
        <button type="button" id="btn-sync-new" class="auth-button auth-logout">Neu</button>
        <div id="auth-status" class="auth-status"></div>
    </div>

    <main>

        <!-- MEHRZEILEN-EINGABE -->
        <div class="input-section">
            <textarea
                id="multi-line-input"
                placeholder="Jede Zeile = eine Erinnerung"
                rows="1"></textarea>

            <div class="input-actions">
                <button type="button"
                        id="newline-button"
                        class="action-button">â†µ</button>

                <button type="button"
                        id="mic-button"
                        class="mic-button"
                        aria-pressed="false">ðŸŽ¤</button>

                <button type="button"
                        id="btn-clear-input"
                        class="clear-input-button">LÃ¶schen</button>

                <button type="button"
                        id="add-all-button"
                        class="add-button">Ãœbernehmen</button>

                <button type="button"
                        id="btn-photo-ocr"
                        class="photo-button">Foto</button>

                <button type="button"
                        id="btnExport"
                        class="export-button">Export</button>
            </div>

            <input
                type="file"
                id="photo-ocr-input"
                accept="image/*"
                capture="environment"
                hidden>

            <div id="mic-status" class="mic-status" aria-live="polite"></div>
        </div>

        <ul id="liste"></ul>

    </main>

    <div id="image-viewer" class="image-viewer" hidden>
        <button type="button" id="btn-image-viewer-close" class="image-viewer-close">SchlieÃŸen</button>
        <img id="image-viewer-img" class="image-viewer-img" alt="Fotoeintrag">
    </div>

    <div id="help-viewer" class="help-viewer" hidden>
        <div class="help-card">
            <button type="button" id="btn-help-viewer-close" class="help-close">SchlieÃŸen</button>
            <h2>Kurzanleitung</h2>
            <ol>
                <li>App einmal installieren und danach als App Ã¶ffnen (PWA).</li>
                <li>Auf beiden Handys denselben 4-stelligen GerÃ¤te-Code eingeben.</li>
                <li><strong>Text:</strong> In das Feld schreiben, dann <strong>Ãœbernehmen</strong>.</li>
                <li><strong>Sprache:</strong> Auf <strong>ðŸŽ¤</strong> tippen, Text prÃ¼fen, dann <strong>Ãœbernehmen</strong>.</li>
                <li><strong>Bild:</strong> Auf <strong>Foto</strong> tippen; das Foto wird sofort gespeichert.</li>
                <li>Im Modus <strong>Erledigt</strong> EintrÃ¤ge antippen, um sie abzuhaken.</li>
                <li>Code <strong>0000</strong> ist nur fÃ¼r diese Kurzanleitung reserviert.</li>
            </ol>
        </div>
    </div>

    <div class="version-row">
        <div class="version-badge" id="version-badge">v1.0.0</div>
    </div>
    <div class="sync-status" id="sync-status">Sync: Lokal</div>
    <div class="sync-debug" id="sync-debug" hidden></div>

    <nav>
        <button type="button" id="btnErfassen" class="active">
            Erfassen
        </button>

        <button type="button" id="btnErledigt">
            Erledigt
        </button>
    </nav>

</div>

<script src="config.js?v=1.0.0"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="app.js?v=1.0.0"></script>

</body>
</html>
